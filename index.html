<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PoseSense | Interactive Yoga Pose Checker</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --dark-red: #e63946;
  --red: #f06670;
  --orange: #ff9f43;
  --yellow: #ffd60a;
  --pink: #ff7eb3;
  --purple: #b368ff;
  --light-orange: #ffbc6b;
  --white: #ffffff;
  --dark: #1d1d1d;
}

/* ---------------- GENERAL ---------------- */
* { box-sizing: border-box; }
body { 
  margin: 0; 
  font-family: 'Poppins', sans-serif;
  color: var(--dark);
  overflow-x: hidden;
  background: #fff3b0;
  position: relative;
  min-height: 100vh;
}

/* ---------------- BACKGROUND CIRCLES ---------------- */
.background-circle {
  position: absolute;
  border-radius: 50%;
  opacity: 0.25;
  filter: blur(25px);
  animation: float 20s linear infinite alternate;
  mix-blend-mode: screen;
  z-index: 0;
}
@keyframes float {
  0% { transform: translateY(0) translateX(0); }
  50% { transform: translateY(-30px) translateX(30px); }
  100% { transform: translateY(0) translateX(0); }
}

/* ---------------- HERO ---------------- */
header {
  min-height: 100vh;
  padding: 80px 20px;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
  position: relative;
  z-index: 2;
}

header h1 {
  font-size: 4rem;
  color: var(--dark-red);
  letter-spacing: 1px;
  transition: 0.3s ease;
}
header h1:hover { transform: scale(1.05); color: var(--orange); }

header p {
  font-size: 1.4rem;
  max-width: 760px;
  margin: 20px auto;
  transition: 0.3s ease;
}
header p:hover { color: var(--red); transform: translateY(-3px); }

button {
  background: linear-gradient(135deg, var(--dark-red), var(--yellow));
  border: none;
  color: white;
  padding: 18px 48px;
  font-size: 1.2rem;
  border-radius: 60px;
  cursor: pointer;
  font-weight: 600;
  box-shadow: 0 15px 40px rgba(0,0,0,0.35);
  transition: 0.35s ease;
}
button:hover { transform: translateY(-6px) scale(1.07); }

/* ---------------- SECTIONS ---------------- */
section {
  padding: 80px 20px;
  max-width: 1200px;
  margin: auto;
  position: relative;
  z-index: 2;
}

.section-title {
  text-align: center;
  font-size: 2.6rem;
  color: var(--dark-red);
  margin-bottom: 40px;
  transition: 0.3s ease;
}
.section-title:hover { color: var(--orange); }

/* ---------------- CARDS ---------------- */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 30px;
}

.card {
  background: white;
  padding: 35px;
  border-radius: 24px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.15);
  position: relative;
  overflow: hidden;
  transition: 0.4s ease;
}
.card:hover {
  transform: translateY(-10px) scale(1.02);
  box-shadow: 0 25px 50px rgba(0,0,0,0.25);
}

/* ---------------- BENEFIT ITEMS ---------------- */
.benefit {
  font-size: 1.1rem;
  display: flex;
  align-items: center;
  gap: 14px;
}
.benefit span {
  background: linear-gradient(135deg, var(--dark-red), var(--yellow));
  color: white;
  padding: 12px;
  border-radius: 50%;
  font-weight: 700;
}

/* ---------------- WEBCAM ---------------- */
#webcam-container canvas {
  border-radius: 24px;
  border: 8px solid var(--dark-red);
  box-shadow: 0 25px 50px rgba(230,57,70,0.4);
  transition: 0.4s ease;
}
#webcam-container canvas:hover { transform: scale(1.03); }

/* ---------------- LABELS ---------------- */
#label-container div {
  background: #fff1f1;
  color: var(--dark-red);
  padding: 12px;
  margin: 10px auto;
  width: 260px;
  border-radius: 16px;
  font-weight: 600;
  transition: 0.3s ease;
}
#label-container div:hover { transform: translateY(-3px); color: var(--orange); }

/* ---------------- BENEFITS BOX ---------------- */
#benefits {
  display: none;
  margin-top: 30px;
  padding: 28px;
  background: linear-gradient(135deg, #fff8cc, #ffe6e6);
  border-radius: 22px;
  font-size: 1.2rem;
  border-left: 10px solid var(--dark-red);
  transition: 0.4s ease;
  animation: fadeUp 0.6s ease;
}

/* ---------------- POSE TIPS ---------------- */
#pose-tips {
  margin-top: 15px;
  padding: 20px;
  background: linear-gradient(135deg, #fff1f1, #fff8cc);
  border-radius: 20px;
  font-size: 1.1rem;
  color: var(--dark);
}

/* ---------------- POSE BENEFITS SECTION ---------------- */
#pose-benefits .card ul {
  margin-top: 15px;
  list-style-type: disc;
  padding-left: 20px;
}

/* ---------------- FOOTER ---------------- */
footer {
  text-align: center;
  padding: 25px 0;
  color: var(--dark-red);
  font-weight: 500;
}

/* ---------------- ANIMATIONS ---------------- */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>

<!-- BACKGROUND CIRCLES -->
<div class="background-circle" style="width:220px;height:220px;top:5%;left:10%;background:var(--dark-red);"></div>
<div class="background-circle" style="width:250px;height:250px;top:20%;left:70%;background:var(--red);animation-delay:2s;"></div>
<div class="background-circle" style="width:180px;height:180px;top:40%;left:40%;background:var(--orange);animation-delay:4s;"></div>
<div class="background-circle" style="width:200px;height:200px;top:60%;left:20%;background:var(--yellow);animation-delay:6s;"></div>
<div class="background-circle" style="width:220px;height:220px;top:30%;left:30%;background:var(--pink);animation-delay:8s;"></div>
<div class="background-circle" style="width:200px;height:200px;top:50%;left:60%;background:var(--purple);animation-delay:10s;"></div>

<header>
  <h1>PoseSense</h1>
  <p>A browser-based pose checker that helps people stay active, improve posture, and move with confidence.</p>
  <br>
  <button onclick="init()">Try it out!</button>
  <button onclick="toggleMusic()" id="music-btn">ðŸ”Š Play Music</button>
</header>

<section>
  <h2 class="section-title">The Challenge</h2>
  <div class="card">
    <p>Many people want to exercise or stretch but are unsure if they are doing poses correctly. Without feedback, posture mistakes can reduce effectiveness and lead to discomfort.</p>
    <p>PoseSense provides real-time pose recognition using a webcam, helping users understand their movement and learn proper form in an interactive way.</p>
  </div>
</section>

<section>
  <h2 class="section-title">Who Benefits</h2>
  <div class="grid">
    <div class="card benefit"><span>âœ“</span> Beginners learning proper posture</div>
    <div class="card benefit"><span>âœ“</span> Students and desk workers</div>
    <div class="card benefit"><span>âœ“</span> Home fitness users</div>
    <div class="card benefit"><span>âœ“</span> Anyone who wants fun, guided movement</div>
  </div>
</section>

<section style="text-align:center;">
  <h2 class="section-title">Live Pose Checker</h2>
  <p>Try: Stretch Pose â€¢ Squat Pose â€¢ Arms Up Pose</p>

  <div id="webcam-container"></div>
  <div id="label-container"></div>
  <div id="benefits"></div>
  <div id="pose-tips">
    <strong>Pose Tips:</strong>
    <ul>
      <li><strong>Stretch Pose:</strong> Extend arms and legs fully, breathe deeply.</li>
      <li><strong>Squat Pose:</strong> Keep knees aligned with toes, engage core.</li>
      <li><strong>Arms Up Pose:</strong> Straighten back, open chest, maintain posture.</li>
    </ul>
  </div>
</section>

<section id="pose-benefits">
  <h2 class="section-title">Benefits of Each Pose</h2>
  <div class="grid">
    <div class="card">
      <h3>Stretch Pose</h3>
      <ul>
        <li>Improves flexibility and muscle elasticity</li>
        <li>Reduces stiffness and tension</li>
        <li>Helps prevent injuries</li>
      </ul>
    </div>
    <div class="card">
      <h3>Squat Pose</h3>
      <ul>
        <li>Strengthens legs and core</li>
        <li>Improves balance and posture</li>
        <li>Activates stabilizing muscles</li>
      </ul>
    </div>
    <div class="card">
      <h3>Arms Up Pose</h3>
      <ul>
        <li>Opens chest and improves breathing</li>
        <li>Enhances posture and back alignment</li>
        <li>Boosts circulation</li>
      </ul>
    </div>
  </div>
</section>

<footer>Created by Gabriel Martinez</footer>

<!-- BACKGROUND MUSIC -->
<audio id="bg-music" src="relaxing-yoga.mp3" loop></audio>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

<script>
const URL = "./my_model/";
let model, webcam, labelContainer, maxPredictions;
let started=false;

// INIT WEBCAM AND MODEL
async function init(){
  if(started) return;
  started=true;
  model = await tmImage.load(URL+"model.json", URL+"metadata.json");
  maxPredictions = model.getTotalClasses();
  webcam = new tmImage.Webcam(320,320,true);
  await webcam.setup();
  await webcam.play();
  window.requestAnimationFrame(loop);
  document.getElementById("webcam-container").appendChild(webcam.canvas);
  labelContainer=document.getElementById("label-container");
  for(let i=0;i<maxPredictions;i++){
    labelContainer.appendChild(document.createElement("div"));
  }
}

// LOOP AND PREDICT
async function loop(){
  webcam.update();
  await predict();
  window.requestAnimationFrame(loop);
}

async function predict(){
  const prediction = await model.predict(webcam.canvas);
  let top={name:"",prob:0};
  for(let i=0;i<maxPredictions;i++){
    const p=prediction[i];
    labelContainer.childNodes[i].innerHTML=`${p.className}: ${p.probability.toFixed(2)}`;
    if(p.probability>top.prob) top=p;
  }
  showBenefits(top.name, top.probability);
}

// DISPLAY BENEFITS IF â‰¥ 0.8
function showBenefits(pose, prob){
  const box=document.getElementById("benefits");
  if(prob<0.8){box.style.display="none"; return;}
  const messages={
    "Stretch Pose":"Stretch Pose improves flexibility, reduces muscle stiffness, and helps prevent injury.",
    "Squat Pose":"Squat Pose strengthens legs, engages core, and improves balance.",
    "Arms Up Pose":"Arms Up Pose improves posture, opens chest, and boosts circulation."
  };
  box.innerHTML=messages[pose]||"";
  box.style.display="block";
}

// BACKGROUND MUSIC CONTROL
const music = document.getElementById("bg-music");
function toggleMusic(){
  if(music.paused){ music.play(); document.getElementById("music-btn").textContent="ðŸ”Š Music On"; }
  else{ music.pause(); document.getElementById("music-btn").textContent="ðŸ”‡ Music Off"; }
}
</script>
</body>
</html>
